schema: '2.0'
stages:
  get_data:
    cmd:
    - mkdir data\raw
    - tar -xvzf data\train_val.zip -C data\raw
    deps:
    - path: data\train_val.zip
      hash: md5
      md5: 78c6e1d34ab05c88d8e2957edb036d35
      size: 171853482
    outs:
    - path: data\raw
      hash: md5
      md5: c3010cfd407af01fc71666a522e4b168.dir
      size: 1837161836
      nfiles: 3050
  preprocessing:
    cmd: python src\preprocess.py
    deps:
    - path: data\raw
      hash: md5
      md5: c3010cfd407af01fc71666a522e4b168.dir
      size: 1837161836
      nfiles: 3050
    - path: src\preprocess.py
      hash: md5
      md5: b242fa3223ae7a4e2672c01bfa18a2f5
      size: 2092
    params:
      params.yaml:
        preprocessing:
          mask_color:
          - 255
          - 255
          - 0
    outs:
    - path: data\clean
      hash: md5
      md5: 46c75af7a727aa940441bef835c89feb.dir
      size: 158758136
      nfiles: 2404
  train:
    cmd: python src\train.py
    deps:
    - path: data\clean
      hash: md5
      md5: 46c75af7a727aa940441bef835c89feb.dir
      size: 158758136
      nfiles: 2404
    - path: src\core
      hash: md5
      md5: 361c4b47d428d1eeb6b29f710764b994.dir
      size: 10372
      nfiles: 4
    - path: src\train.py
      hash: md5
      md5: b47a396e4ba9fd193434e419bfadeb33
      size: 1020
    params:
      params.yaml:
        dataset:
          empty_images_ratio: 0.1
          train_val_ratio: 0.8
        model:
          backbone_type: dinov2_vits14
          head_args:
            input_shape: 384
            output_shape:
            - 224
            - 224
            scale_factor: 7
          learning_rate: 0.001
        transform:
          __version__: 1.3.1
          transform:
            __class_fullname__: Compose
            additional_targets: {}
            bbox_params:
            is_check_shapes: true
            keypoint_params:
            p: 1.0
            transforms:
            - __class_fullname__: Resize
              always_apply: false
              height: 224
              interpolation: 1
              p: 1
              width: 224
            - __class_fullname__: Normalize
              always_apply: false
              max_pixel_value: 255.0
              mean:
              - 0.485
              - 0.456
              - 0.406
              p: 1.0
              std:
              - 0.229
              - 0.224
              - 0.225
            - __class_fullname__: ToTensorV2
              always_apply: true
              p: 1.0
              transpose_mask: false
    outs:
    - path: dvclive\metrics.json
      hash: md5
      md5: ba3f056e0f3893ce60a7e6ee09767d03
      size: 98
    - path: dvclive\plots
      hash: md5
      md5: 9f95483f03a37011165248d21774a6d2.dir
      size: 53
      nfiles: 2
    - path: weights
      hash: md5
      md5: e58b7182890af8b4660b02b7d8f147b2.dir
      size: 93028433
      nfiles: 1
